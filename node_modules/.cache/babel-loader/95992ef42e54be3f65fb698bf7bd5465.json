{"ast":null,"code":"import _regeneratorRuntime from\"/Users/emran/Desktop/Chat/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/emran/Desktop/Chat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/emran/Desktop/Chat/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import{useAuthState}from'react-firebase-hooks/auth';import{Context}from'../../index';import classes from'./Chat.module.css';import{useCollectionData}from'react-firebase-hooks/firestore';import Load from'../Load/load';import firebase from'firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Chat=function Chat(){var _useContext=useContext(Context),auth=_useContext.auth,firestore=_useContext.firestore;var _useAuthState=useAuthState(auth),_useAuthState2=_slicedToArray(_useAuthState,1),user=_useAuthState2[0];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useCollectionData=useCollectionData(firestore.collection('messages').orderBy('createdAt')),_useCollectionData2=_slicedToArray(_useCollectionData,2),messages=_useCollectionData2[0],loading=_useCollectionData2[1];var sendMessage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:firestore.collection('messages').add({uid:user.uid,displayName:user.displayName,photoURL:user.photoURL,text:value,createdAt:firebase.firestore.FieldValue.serverTimestamp()});setValue('');case 2:case\"end\":return _context.stop();}}},_callee);}));return function sendMessage(){return _ref.apply(this,arguments);};}();if(loading){return/*#__PURE__*/_jsx(Load,{});}return/*#__PURE__*/_jsxs(\"div\",{className:classes.chat,style:{height:window.innerHeight-60},children:[/*#__PURE__*/_jsx(\"div\",{className:classes.window,children:messages.map(function(messages){return/*#__PURE__*/_jsxs(\"div\",{className:classes.message,style:{border:user.uid===messages.uid?'3px solid #2EE59D':'3px solid black',marginLeft:user.uid===messages.uid?'auto':'10px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.info,children:[/*#__PURE__*/_jsx(\"img\",{className:classes.avatar,src:messages.photoURL}),/*#__PURE__*/_jsx(\"div\",{className:classes.name,children:messages.displayName})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.text,children:messages.text})]});})}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,children:[/*#__PURE__*/_jsx(\"input\",{className:classes.input,maxlength:\"90\",value:value,onChange:function onChange(e){return setValue(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:classes.button,onClick:sendMessage,type:\"button\",children:\"\\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"})]})]});};export default Chat;","map":{"version":3,"sources":["/Users/emran/Desktop/Chat/src/components/Chat/Chat.js"],"names":["React","useContext","useState","useAuthState","Context","classes","useCollectionData","Load","firebase","Chat","auth","firestore","user","value","setValue","collection","orderBy","messages","loading","sendMessage","add","uid","displayName","photoURL","text","createdAt","FieldValue","serverTimestamp","chat","height","window","innerHeight","map","message","border","marginLeft","info","avatar","name","form","input","e","target","button"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\nimport {useAuthState} from 'react-firebase-hooks/auth'\nimport { Context } from '../../index';\nimport classes from './Chat.module.css'\nimport {useCollectionData} from 'react-firebase-hooks/firestore'\nimport Load from '../Load/load';\nimport firebase from 'firebase';\n\nconst Chat = () => {\n\n    const {auth, firestore} = useContext(Context)\n    const [user] = useAuthState(auth)\n    const [value, setValue] = useState('')\n    const [messages, loading] = useCollectionData(\n        firestore.collection('messages').orderBy('createdAt')\n    )\n\n    const sendMessage = async () => {\n        firestore.collection('messages').add({\n            uid: user.uid,\n            displayName: user.displayName,\n            photoURL: user.photoURL,\n            text: value,\n            createdAt: firebase.firestore.FieldValue.serverTimestamp()\n        })\n        setValue('')\n    }\n\n    if (loading) {\n        return <Load />\n    }\n\n    return (\n        <div className = {classes.chat} style = {{height: window.innerHeight - 60}}>\n            <div className = {classes.window}>\n                {messages.map( messages => \n                    <div className = {classes.message} \n                    style = {{\n                        border: user.uid === messages.uid ? '3px solid #2EE59D' : '3px solid black',\n                        marginLeft: user.uid === messages.uid ? 'auto' : '10px',\n                    }}> \n                    <div className = {classes.info}>\n                        <img className = {classes.avatar} src = {messages.photoURL}/>\n                        <div className = {classes.name}>{messages.displayName}</div>\n                    </div>\n                        <div className = {classes.text} >{messages.text}</div>\n                    </div>\n                    ) }\n            </div>\n            <form className = {classes.form}>\n                <input \n                    className = {classes.input} \n                    maxlength = \"90\" \n                    value = {value} \n                    onChange = {e => setValue(e.target.value)}>\n\n                </input>\n                <button className = {classes.button} onClick={sendMessage} type = 'button'>отправить</button>\n                \n            </form>\n        </div>\n    )\n}\n\nexport default Chat;"]},"metadata":{},"sourceType":"module"}